<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Objective-C编码规范：26个方面解决iOS开发问题 | 荞一夏的小窝</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Objective-C编码规范的原因是我们能够在我们的书，教程和初学者工具包的代码保持优雅和一致。即使我们有很多不同的作者来完成不同的书籍。 这里编码规范有可能与你看到的其他Objective-C编码规范不同，因为它主要是为了打印和Web的易读性。">
<meta property="og:type" content="article">
<meta property="og:title" content="Objective-C编码规范：26个方面解决iOS开发问题">
<meta property="og:url" content="http://yoursite.com/2016/10/10/Objective-C编码规范：26个方面解决iOS开发问题/index.html">
<meta property="og:site_name" content="荞一夏的小窝">
<meta property="og:description" content="Objective-C编码规范的原因是我们能够在我们的书，教程和初学者工具包的代码保持优雅和一致。即使我们有很多不同的作者来完成不同的书籍。 这里编码规范有可能与你看到的其他Objective-C编码规范不同，因为它主要是为了打印和Web的易读性。">
<meta property="og:updated_time" content="2016-10-10T05:25:37.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Objective-C编码规范：26个方面解决iOS开发问题">
<meta name="twitter:description" content="Objective-C编码规范的原因是我们能够在我们的书，教程和初学者工具包的代码保持优雅和一致。即使我们有很多不同的作者来完成不同的书籍。 这里编码规范有可能与你看到的其他Objective-C编码规范不同，因为它主要是为了打印和Web的易读性。">
  
    <link rel="alternative" href="/atom.xml" title="荞一夏的小窝" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  
  <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          fancybox: true,
          animate: true,
          isHome: false,
          isPost: true,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/bloghead.JPG" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/">荞一夏</a></h1>
        </hgroup>

        
        <p class="header-subtitle">You gotta live what&#39;s in you！不忘初衷！</p>
        
        
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/Home/">首页</a></li>
                        
                            <li><a href="/tags/iOS">iOS</a></li>
                        
                            <li><a href="/tags/前端">前端</a></li>
                        
                            <li><a href="/tags/设计">设计</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl github" target="_blank" href="https://github.com/Anonymous-Monk" title="github">github</a>
                            
                                <a class="fl weibo" target="_blank" href="http://weibo.com/u/3613440433" title="weibo">weibo</a>
                            
                                <a class="fl facebook" target="_blank" href="#" title="facebook">facebook</a>
                            
                                <a class="fl segmentfault" target="_blank" href="#" title="segmentfault">segmentfault</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://MOxFIVE.github.io/">MOxFIVE</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.vsay.cn/">DoubleV</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.ccwebsite.com/">兮兮</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://blog.dandyweng.com/">翁天信</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.plqblog.com/views/index.php">潘利强</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.hankin.cn/">hankin</a>
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://blog.waydrow.com/">waydrow</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">纯海迷、爱运动、爱交友、爱旅行、喜欢接触新鲜事物、迎接新的挑战，更爱游离于错综复杂的编码与逻辑中</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">荞一夏</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/bloghead.JPG" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">荞一夏</a></h1>
            </hgroup>
            
            <p class="header-subtitle">You gotta live what&#39;s in you！不忘初衷！</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/Home/">首页</a></li>
                
                    <li><a href="/tags/iOS">iOS</a></li>
                
                    <li><a href="/tags/前端">前端</a></li>
                
                    <li><a href="/tags/设计">设计</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="github" target="_blank" href="https://github.com/Anonymous-Monk" title="github">github</a>
                    
                        <a class="weibo" target="_blank" href="http://weibo.com/u/3613440433" title="weibo">weibo</a>
                    
                        <a class="facebook" target="_blank" href="#" title="facebook">facebook</a>
                    
                        <a class="segmentfault" target="_blank" href="#" title="segmentfault">segmentfault</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap"><article id="post-Objective-C编码规范：26个方面解决iOS开发问题" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/10/10/Objective-C编码规范：26个方面解决iOS开发问题/" class="article-date">
      <time datetime="2016-10-10T01:04:38.000Z" itemprop="datePublished">2016-10-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Objective-C编码规范：26个方面解决iOS开发问题
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        

        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/博客/">博客</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <a id="more"></a>
<p>介绍<br>Objective-C编码规范的原因是我们能够在我们的书，教程和初学者工具包的代码保持优雅和一致。即使我们有很多不同的作者来完成不同的书籍。 这里编码规范有可能与你看到的其他Objective-C编码规范不同，因为它主要是为了打印和Web的易读性。<br>语言<br> 应该使用US英语。<br> 应该： <code>UIColor *myColor = [UIColor whiteColor];</code><br> 不应该： <code>UIColor *myColour = [UIColor whiteColor];</code><br>代码组织<br> 在函数分组和protocol/delegate实现中使用#pragma mark -来分类方法，要遵循以下一般结构：<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">#pragma mark - Lifecycle</div><div class="line"> - (instancetype)init &#123;&#125;</div><div class="line"> - (void)dealloc &#123;&#125; </div><div class="line"> - (void)viewDidLoad &#123;&#125; </div><div class="line"> - (void)viewWillAppear:(BOOL)animated &#123;&#125; </div><div class="line"> - (void)didReceiveMemoryWarning &#123;&#125;</div><div class="line">#pragma mark- Custom Accessors</div><div class="line"> - (void)setCustomProperty:(id)value &#123;&#125; </div><div class="line"> - (id)customProperty &#123;&#125; </div><div class="line">#pragma mark - IBActions</div><div class="line"> - (IBAction)submitData:(id)sender &#123;&#125; </div><div class="line">#pragma mark - Public </div><div class="line"> - (void)publicMethod &#123;&#125; </div><div class="line">#pragma mark - Private </div><div class="line"> - (void)privateMethod &#123;&#125; </div><div class="line">#pragma mark - Protocol conformance </div><div class="line">#pragma mark - UITextFieldDelegate </div><div class="line">#pragma mark - UITableViewDataSource </div><div class="line">#pragma mark - UITableViewDelegate </div><div class="line">#pragma mark - NSCopying </div><div class="line"> - (id)copyWithZone:(NSZone *)zone &#123;&#125; </div><div class="line">#pragma mark - NSObject </div><div class="line"> - (NSString *)description &#123;&#125;</div></pre></td></tr></table></figure></p>
<p>空格<br> 缩进使用4个空格，确保在Xcode偏好设置来设置。（raywenderlich.com使用2个空格）<br> 方法大括号和其他大括号(if/else/switch/while 等.)总是在同一行语句打开但在新行中关闭。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">应该：</div><div class="line">  if (user.isHappy) &#123;</div><div class="line">    //Do something</div><div class="line">  &#125; else &#123;</div><div class="line">   //Do something else</div><div class="line">  &#125; </div><div class="line">不应该：</div><div class="line"> if (user.isHappy)</div><div class="line">  &#123; //Do something</div><div class="line">   &#125;</div><div class="line">  else</div><div class="line">  &#123; </div><div class="line">  //Do something else</div><div class="line">  &#125;</div></pre></td></tr></table></figure></p>
<p> 在方法之间应该有且只有一行，这样有利于在视觉上更清晰和更易于组织。在方法内的空白应该分离功能，但通常都抽离出来成为一个新方法。 优先使用auto-synthesis。但如果有必要，@synthesize和@dynamic应该在实现中每个都声明新的一行。 应该避免以冒号对齐的方式来调用方法。因为有时方法签名可能有3个以上的冒号和冒号对齐会使代码更加易读。请不要这样做，尽管冒号对齐的方法包含代码块，因为Xcode的对齐方式令它难以辨认。<br>注释<br> 当需要注释时，注释应该用来解释这段特殊代码为什么要这样做。任何被使用的注释都必须保持最新或被删除。 一般都避免使用块注释，因为代码尽可能做到自解释，只有当断断续续或几行代码时才需要注释。例外：这不应用在生成文档的注释。<br>命名<br> Apple命名规则尽可能坚持，特别是与这些相关的memory management rules (NARC)。 长的，描述性的方法和变量命名是好的。<br> 应该： <code>UIButton *settingsButton;</code><br> 不应该： <code>UIButton *setBut;</code><br> 三个字符前缀应该经常用在类和常量命名，但在CoreData的实体名中应被忽略。对于官方的raywenderlich.com书、初学者工具包或教程，前缀RWT应该被使用。 常量应该使用驼峰式命名规则，所有的单词首字母大写和加上与类名有关的前缀。 应该：<br> <code>static NSTimeInterval const RWTTutorialViewControllerNavigationFadeAnimationDuration = 0.3;</code> 不应该：<br> <code>static NSTimeInterval const fadetime = 1.7;</code><br> 属性也是使用驼峰式，但首单词的首字母小写。对属性使用auto-synthesis，而不是手动编写@synthesize语句，除非你有一个好的理由。<br> 应该：<br> <code>@property (strong, nonatomic) NSString *descriptiveVariableName;</code><br> 不应该：<br> <code>id varnm;</code><br>下划线<br> 当使用属性时，实例变量应该使用self.来访问和改变。这就意味着所有属性将会视觉效果不同，因为它们前面都有self.。 但有一个特例：在初始化方法里，实例变量(例如，_variableName)应该直接被使用来避免getters/setters潜在的副作用。<br> 局部变量不应该包含下划线。<br>方法<br> 在方法签名中，应该在方法类型(-/+ 符号)之后有一个空格。在方法各个段之间应该也有一个空格(符合Apple的风格)。在参数之前应该包含一个具有描述性的关键字来描述参数。“and”这个词的用法应该保留。它不应该用于多个参数来说明，就像initWithWidth:height以下这个例子：<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">应该：</div><div class="line"> - (void)setExampleText:(NSString *)text image:(UIImage *)image; </div><div class="line"> - (void)sendAction:(SEL)aSelector to:(id)anObject forAllCells:(BOOL)flag; </div><div class="line"> - (id)viewWithTag:(NSInteger)tag; </div><div class="line"> - (instancetype)initWithWidth:(CGFloat)width height:(CGFloat)height; </div><div class="line">不应该： </div><div class="line"> - (void)setT:(NSString *)text i:(UIImage *)image; </div><div class="line"> - (void)sendAction:(SEL)aSelector :(id)anObject :(BOOL)flag; </div><div class="line"> - (id)taggedView:(NSInteger)tag; </div><div class="line"> - (instancetype)initWithWidth:(CGFloat)width andHeight:(CGFloat)height; </div><div class="line"> - (instancetype)initWith:(int)width and:(int)height; // Never do this.</div></pre></td></tr></table></figure></p>
<p>变量<br> 变量尽量以描述性的方式来命名。单个字符的变量命名应该尽量避免，除了在for()循环。 星号表示变量是指针。<br> 例如： <code>NSString *text</code> 既不是 <code>NSString* text</code> 也不是 <code>NSString * text</code>，除了一些特殊情况下常量。 私有变量应该尽可能代替实例变量的使用。尽管使用实例变量是一种有效的方式，但更偏向于使用属性来保持代码一致性。 通过使用’back’属性(_variable，变量名前面有下划线)直接访问实例变量应该尽量避免，除了在初始化方法(init, initWithCoder:, 等…)，dealloc 方法和自定义的setters和getters。想了解关于如何在初始化方法和dealloc直接使用Accessor方法的更多信息，查看这里。<br> 应该：<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">@interface RWTTutorial : NSObject </div><div class="line">@property (strong, nonatomic) NSString *tutorialName; </div><div class="line">@end </div><div class="line">不应该： </div><div class="line">@interface RWTTutorial : NSObject &#123; </div><div class="line">NSString *tutorialName; &#125;</div></pre></td></tr></table></figure></p>
<p>属性特性<br> 所有属性特性应该显式地列出来，有助于新手阅读代码。属性特性的顺序应该是<code>storage、atomicity</code>，与在Interface Builder连接UI元素时自动生成代码一致。<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">应该： </div><div class="line">@property (weak, nonatomic) IBOutlet UIView *containerView; </div><div class="line">@property (strong, nonatomic) NSString *tutorialName; </div><div class="line">不应该： </div><div class="line">@property (nonatomic, weak) IBOutlet UIView *containerView; </div><div class="line">@property (nonatomic) NSString *tutorialName;</div></pre></td></tr></table></figure></p>
<p> NSString应该使用copy而不是strong的属性特性。 为什么？即使你声明一个NSString的属性，有人可能传入一个NSMutableString的实例，然后在你没有注意的情况下修改它。<br> 应该：<br> <code>@property (copy, nonatomic) NSString *tutorialName;</code><br> 不应该：<br> <code>@property (strong, nonatomic) NSString *tutorialName;</code><br>点符号语法<br> 点语法是一种很方便封装访问方法调用的方式。当你使用点语法时，通过使用getter或setter方法，属性仍然被访问或修改。想了解更多。[]符号更偏向于用在其他例子。<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">应该： </div><div class="line">objc NSInteger arrayCount = [self.array count]; </div><div class="line">view.backgroundColor = [UIColor orangeColor]; </div><div class="line">[UIApplication sharedApplication].delegate; </div><div class="line">不应该： </div><div class="line">NSInteger arrayCount = self.array.count; </div><div class="line">[view setBackgroundColor:[UIColor orangeColor]]; </div><div class="line">UIApplication.sharedApplication.delegate;</div></pre></td></tr></table></figure></p>
<p>字面值<br> NSString、NSDictionary、NSArray和NSNumber的字面值应该在创建这些类的不可变实例时被使用。请特别注意nil值不能传入NSArray和NSDictionary字面值，因为这样会导致crash。<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">应该： </div><div class="line">NSArray *names = @[@&quot;Brian&quot;, @&quot;Matt&quot;, @&quot;Chris&quot;, @&quot;Alex&quot;, @&quot;Steve&quot;, @&quot;Paul&quot;]; </div><div class="line">NSDictionary *productManagers = @&#123;@&quot;iPhone&quot;: @&quot;Kate&quot;, @&quot;iPad&quot;: @&quot;Kamal&quot;, @&quot;Mobile Web&quot;: @&quot;Bill&quot;&#125;; </div><div class="line">NSNumber *shouldUseLiterals = @YES; </div><div class="line">NSNumber *buildingStreetNumber = @10018; </div><div class="line">不应该: </div><div class="line">NSArray *names = [NSArray arrayWithObjects:@&quot;Brian&quot;, @&quot;Matt&quot;, @&quot;Chris&quot;, @&quot;Alex&quot;, @&quot;Steve&quot;, @&quot;Paul&quot;, nil]; </div><div class="line">NSDictionary *productManagers = [NSDictionary dictionaryWithObjectsAndKeys: @&quot;Kate&quot;, @&quot;iPhone&quot;, @&quot;Kamal&quot;, @&quot;iPad&quot;, @&quot;Bill&quot;, @&quot;Mobile Web&quot;, nil]; </div><div class="line">NSNumber *shouldUseLiterals = [NSNumber numberWithBool:YES]; </div><div class="line">NSNumber *buildingStreetNumber = [NSNumber numberWithInteger:10018];</div></pre></td></tr></table></figure></p>
<p>常量<br> 常量是容易重复被使用和无需通过查找和代替就能快速修改值。常量应该使用static来声明而不是使用#define，除非显式地使用宏。<br> 应该：<br> <code>static NSString * const RWTAboutViewControllerCompanyName = @&quot;RayWenderlich.com&quot;;</code><br> <code>static CGFloat const RWTImageThumbnailHeight = 50.0;</code><br> 不应该：<br> <code>#define CompanyName @&quot;RayWenderlich.com&quot;</code><br> <code>#define thumbnailHeight 2</code><br>枚举类型<br> 当使用enum时，推荐使用新的固定基本类型规格，因为它有更强的类型检查和代码补全。现在SDK有一个宏NS_ENUM()来帮助和鼓励你使用固定的基本类型。<br> 例如：<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">typedef NS_ENUM(NSInteger, RWTLeftMenuTopItemType) &#123; </div><div class="line">RWTLeftMenuTopItemMain, </div><div class="line">RWTLeftMenuTopItemShows, </div><div class="line">RWTLeftMenuTopItemSchedule </div><div class="line">&#125;;</div><div class="line">//你也可以显式地赋值(展示旧的k-style常量定义)：</div><div class="line">typedef NS_ENUM(NSInteger, RWTGlobalConstants) &#123; </div><div class="line">RWTPinSizeMin = 1, </div><div class="line">RWTPinSizeMax = 5, </div><div class="line">RWTPinCountMin = 100, </div><div class="line">RWTPinCountMax = 500, </div><div class="line">&#125;; </div><div class="line">//旧的k-style常量定义应该避免除非编写Core Foundation C的代码。 不应该：</div><div class="line">enum GlobalConstants &#123; </div><div class="line">kMaxPinSize = 5, </div><div class="line">kMaxPinCount = 500, </div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>Case语句<br> 大括号在case语句中并不是必须的，除非编译器强制要求。当一个case语句包含多行代码时，大括号应该加上。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">switch (condition) &#123;</div><div class="line"> case 1: // ... </div><div class="line"> break; </div><div class="line"> case 2: &#123; </div><div class="line"> // ... </div><div class="line"> // Multi-line example using braces </div><div class="line"> break; </div><div class="line"> &#125; </div><div class="line"> case 3: // ... </div><div class="line"> break; </div><div class="line"> default: // ... </div><div class="line"> break; </div><div class="line"> &#125;</div><div class="line"> //有很多次，当相同代码被多个cases使用时，一个fall-through应该被使用。一个fall-through就是在case最后移除’break’语句，这样就能够允许执行流程跳转到下一个case值。为了代码更加清晰，一个fall-through需要注释一下。</div><div class="line"> switch (condition) &#123; </div><div class="line"> case 1: // ** fall-through! ** </div><div class="line"> case 2: // code executed for values 1 and 2 break; default: // ... </div><div class="line"> break; </div><div class="line"> &#125;</div><div class="line"> //当在switch使用枚举类型时，’default’是不需要的。例如：</div><div class="line"> RWTLeftMenuTopItemType menuType = RWTLeftMenuTopItemMain; </div><div class="line"> switch (menuType) &#123; </div><div class="line"> case RWTLeftMenuTopItemMain: // ... </div><div class="line"> break; </div><div class="line"> case RWTLeftMenuTopItemShows: // ... </div><div class="line"> break; </div><div class="line"> case RWTLeftMenuTopItemSchedule: // ... </div><div class="line"> break; </div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<hr>
<p>私有属性<br> 私有属性应该在类的实现文件中的类扩展(匿名分类)中声明，命名分类(比如RWTPrivate或private)应该从不使用除非是扩展其他类。匿名分类应该通过使用+Private.h文件的命名规则暴露给测试。<br> 例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">@interface RWTDetailViewController () </div><div class="line">@property (strong, nonatomic) GADBannerView *googleAdView; </div><div class="line">@property (strong, nonatomic) ADBannerView *iAdView; </div><div class="line">@property (strong, nonatomic) UIWebView *adXWebView; </div><div class="line">@end</div></pre></td></tr></table></figure></p>
<p>布尔值<br> Objective-C使用YES和NO。因为true和false应该只在CoreFoundation，C或C++代码使用。既然nil解析成NO，所以没有必要在条件语句比较。不要拿某样东西直接与YES比较，因为YES被定义为1和一个BOOL能被设置为8位。 这是为了在不同文件保持一致性和在视觉上更加简洁而考虑。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">应该： </div><div class="line">if (someObject) &#123;&#125; </div><div class="line">if (![anotherObject boolValue]) &#123;&#125; </div><div class="line">不应该： </div><div class="line">if (someObject == nil) &#123;&#125; </div><div class="line">if ([anotherObject boolValue] == NO) &#123;&#125; </div><div class="line">if (isAwesome == YES) &#123;&#125; // Never do this. </div><div class="line">if (isAwesome == true) &#123;&#125; // Never do this.</div></pre></td></tr></table></figure></p>
<p>如果BOOL属性的名字是一个形容词，属性就能忽略”is”前缀，但要指定get访问器的惯用名称。<br>例如： <code>@property (assign, getter=isEditable) BOOL editable;</code><br>文字和例子从这里引用Cocoa Naming Guidelines。<br>条件语句<br> 条件语句主体为了防止出错应该使用大括号包围，即使条件语句主体能够不用大括号编写(如，只用一行代码)。这些错误包括添加第二行代码和期望它成为if语句；还有，even more dangerous defect可能发生在if语句里面一行代码被注释了，然后下一行代码不知不觉地成为if语句的一部分。除此之外，这种风格与其他条件语句的风格保持一致，所以更加容易阅读。<br> 应该： <code>if (!error) { return success; }</code><br> 不应该： <code>if (!error) return success; 或 if (!error) return success;</code><br>三元操作符<br> 当需要提高代码的清晰性和简洁性时，三元操作符?:才会使用。单个条件求值常常需要它。多个条件求值时，如果使用if语句或重构成实例变量时，代码会更加易读。一般来说，最好使用三元操作符是在根据条件来赋值的情况下。 Non-boolean的变量与某东西比较，加上括号()会提高可读性。如果被比较的变量是boolean类型，那么就不需要括号。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">应该： </div><div class="line"> NSInteger value = 5; </div><div class="line"> result = (value != 0) ? x : y; </div><div class="line"> BOOL isHorizontal = YES; </div><div class="line"> result = isHorizontal ? x : y; </div><div class="line"> 不应该： </div><div class="line"> result = a &gt; b ? x = c &gt; d ? c : d : y;</div></pre></td></tr></table></figure></p>
<p>Init方法<br> Init方法应该遵循Apple生成代码模板的命名规则，返回类型应该使用instancetype而不是id。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- (instancetype)init &#123; </div><div class="line">    self = [super init]; </div><div class="line">    if (self) &#123; // ... &#125; </div><div class="line">    return self; </div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<p>类构造方法<br> 当类构造方法被使用时，它应该返回类型是instancetype而不是id。这样确保编译器正确地推断结果类型。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@interface Airplane </div><div class="line">+ (instancetype)airplaneWithType:(RWTAirplaneType)type; </div><div class="line">@end</div></pre></td></tr></table></figure></p>
<p> 关于更多instancetype信息，请查看NSHipster.com。<br>CGRect函数<br> 当访问CGRect里的x, y, width, 或 height时，应该使用CGGeometry函数而不是直接通过结构体来访问。引用Apple的CGGeometry： 在这个参考文档中所有的函数，接受CGRect结构体作为输入，在计算它们结果时隐式地标准化这些rectangles。因此，你的应用程序应该避免直接访问和修改保存在CGRect数据结构中的数据。相反，使用这些函数来操纵rectangles和获取它们的特性。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">应该： </div><div class="line">CGRect frame = self.view.frame; </div><div class="line">CGFloat x = CGRectGetMinX(frame); </div><div class="line">CGFloat y = CGRectGetMinY(frame); </div><div class="line">CGFloat width = CGRectGetWidth(frame); </div><div class="line">CGFloat height = CGRectGetHeight(frame); </div><div class="line">CGRect frame = CGRectMake(0.0, 0.0, width, height); </div><div class="line">不应该： CGRect frame = self.view.frame; </div><div class="line">CGFloat x = frame.origin.x; </div><div class="line">CGFloat y = frame.origin.y; </div><div class="line">CGFloat width = frame.size.width; </div><div class="line">CGFloat height = frame.size.height; </div><div class="line">CGRect frame = (CGRect)&#123; .origin = CGPointZero, .size = frame.size &#125;;</div></pre></td></tr></table></figure></p>
<p>黄金路径<br> 当使用条件语句编码时，左手边的代码应该是”golden” 或“happy”路径。也就是不要嵌套if语句，多个返回语句也是OK。<br> 应该：<code>- (void)someMethod { if (![someOther boolValue]) { return; } //Do something important }</code><br> 不应该：<code>- (void)someMethod { if ([someOther boolValue]) { //Do something important } }</code><br>错误处理<br> 当方法通过引用来返回一个错误参数，判断返回值而不是错误变量。<br> 应该： <code>NSError *error; if (![self trySomethingWithError:&amp;error]) { // Handle Error }</code><br> 不应该： <code>NSError *error; [self trySomethingWithError:&amp;error]; if (error) { // Handle Error }</code><br> 在成功的情况下，有些Apple的APIs记录垃圾值(garbage values)到错误参数(如果non-NULL)，那么判断错误值会导致false负值和crash。<br>单例模式<br> 单例对象应该使用线程安全模式来创建共享实例。</p>
<pre><code>+ (instancetype)sharedInstance { 
   static id sharedInstance = nil; 
   static dispatch_once_t onceToken; 
   dispatch_once(&amp;onceToken, ^{ 
     sharedInstance = [[self alloc] init]; 
   }); 
   return sharedInstance; 
}
</code></pre><p> 这会防止possible and sometimes prolific crashes。<br>换行符<br> 换行符是一个很重要的主题，因为它的风格指南主要为了打印和网上的可读性。 例如：<br> <code>self.productsRequest = [[SKProductsRequest alloc]initWithProductIdentifiers:productIdentifiers];</code> 一行很长的代码应该分成两行代码，下一行用两个空格隔开。<br> <code>self.productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:productIdentifiers];</code><br>Xcode工程<br> 物理文件应该与Xcode工程文件保持同步来避免文件扩张。任何Xcode分组的创建应该在文件系统的文件体现。代码不仅是根据类型来分组，而且还可以根据功能来分组，这样代码更加清晰。 尽可能在target的Build Settings打开”Treat Warnings as Errors，和启用以下additional warnings。如果你需要忽略特殊的警告，使用Clang’s pragma feature。</p>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2016/10/10/Objective-C编码规范：26个方面解决iOS开发问题/">Objective-C编码规范：26个方面解决iOS开发问题</a></p>
        <p><span>文章作者:</span><a href="/" title="访问 荞一夏 的个人博客">荞一夏</a></p>
        <p><span>发布时间:</span>2016年10月10日 - 09时04分</p>
        <p><span>最后更新:</span>2016年10月10日 - 13时25分</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2016/10/10/Objective-C编码规范：26个方面解决iOS开发问题/" title="Objective-C编码规范：26个方面解决iOS开发问题">http://yoursite.com/2016/10/10/Objective-C编码规范：26个方面解决iOS开发问题/</a>
            <span class="copy-path" data-clipboard-text="原文: http://yoursite.com/2016/10/10/Objective-C编码规范：26个方面解决iOS开发问题/　　作者: 荞一夏" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script src="/js/clipboard.min.js"></script>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" title="中国大陆 (CC BY-NC-SA 3.0 CN)" target = "_blank">"署名-非商用-相同方式共享 3.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



<nav id="article-nav">
  
    <a href="/2016/10/23/iOS基础面试/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          iOS基础面试
        
      </div>
    </a>
  
  
    <a href="/2016/10/09/探究iOS后台刷新/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">探究iOS后台刷新</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>

    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    
</div>
<input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">

<script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script>
    var valueHide = "隐藏目录";
    var valueShow = "显示目录";

    if ($(".left-col").is(":hidden")) {
        $("#tocButton").attr("value", valueShow);
    }
    $("#tocButton").click(function() {
        if ($("#toc").is(":hidden")) {
            $("#tocButton").attr("value", valueHide);
            $("#toc").slideDown(320);
        }
        else {
            $("#tocButton").attr("value", valueShow);
            $("#toc").slideUp(350);
        }
    })
    if ($(".toc").length < 1) {
        $("#toc, #tocButton").hide();
    }
</script>





<div class="bdsharebuttonbox">
	<a href="#" class="fx fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
	<a href="#" class="fx fa-weixin bds_weixin" data-cmd="weixin" title="分享到微信"></a>
	<a href="#" class="fx fa-qq bds_sqq" data-cmd="sqq" title="分享到QQ好友"></a>
	<a href="#" class="fx fa-facebook-official bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
	<a href="#" class="fx fa-twitter bds_twi" data-cmd="twi" title="分享到Twitter"></a>
	<a href="#" class="fx fa-linkedin bds_linkedin" data-cmd="linkedin" title="分享到linkedin"></a>
	<a href="#" class="fx fa-files-o bds_copy" data-cmd="copy" title="分享到复制网址"></a>
</div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>




    
      <div class="duoshuo" id="comments">
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="2016/10/10/Objective-C编码规范：26个方面解决iOS开发问题/" data-title="Objective-C编码规范：26个方面解决iOS开发问题" data-url="http://yoursite.com/2016/10/10/Objective-C编码规范：26个方面解决iOS开发问题/"></div>
    <!-- 多说评论框 end -->
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
    var duoshuoQuery = {short_name:"null"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = '/js/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>
    <!-- 多说公共JS代码 end -->
</div>

    



    <div class="scroll" id="post-nav-button">
        
            <a href="/2016/10/23/iOS基础面试/" title="上一篇: iOS基础面试">
                <i class="fa fa-angle-left"></i>
            </a>
        
        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>
        
            <a href="/2016/10/09/探究iOS后台刷新/" title="下一篇: 探究iOS后台刷新">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>
    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/11/13/iOS单元测试/">iOS单元测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/23/iOS进阶面试/">iOS进阶面试</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/23/iOS基础面试/">iOS基础面试</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/10/Objective-C编码规范：26个方面解决iOS开发问题/">Objective-C编码规范：26个方面解决iOS开发问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/09/探究iOS后台刷新/">探究iOS后台刷新</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/29/文件管理-沙盒路径、NSFileManager/">文件管理-沙盒路径、NSFileManager</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/28/iOS-最新版-CocoaPods-的安装流程/">iOS 最新版 CocoaPods 的安装流程</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/28/Awesome-iOS/">Awesome-iOS</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/28/Awesome-设计/">Awesome-设计</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/28/Awesome-前端/">Awesome-前端</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/28/Markdown语法指南/">Markdown语法指南</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/14/Hexo-使用/">Hexo 使用</a></li></ul>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
    <script>
        $(".post-list").addClass("toc-article");
        $(".post-list-item a").attr("target","_blank");
        $("#post-nav-button > a:nth-child(2)").click(function() {
            $(".fa-bars, .fa-times").toggle();
            $(".post-list").toggle(300);
            if ($(".toc").length > 0) {
                $("#toc, #tocButton").toggle(200, function() {
                    if ($(".switch-area").is(":visible")) {
                        $("#tocButton").attr("value", valueHide);
                        }
                    })
            }
            else {
            }
        })
    </script>



    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2018 荞一夏
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/luuman/hexo-theme-spfk" target="_blank">spfk</a> by luuman
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >海贼到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 24;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>





<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


  </div>
</body>
</html>